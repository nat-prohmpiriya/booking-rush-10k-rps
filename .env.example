# =============================================================================
# Booking Rush 10k RPS - Environment Configuration
# =============================================================================
# Copy this file to .env and update values for your environment
# Remote Infrastructure: 
# =============================================================================

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
APP_ENV=development
APP_DEBUG=true
LOG_LEVEL=debug

# -----------------------------------------------------------------------------
# API Gateway
# -----------------------------------------------------------------------------
API_GATEWAY_PORT=8080
API_GATEWAY_HOST=0.0.0.0

# -----------------------------------------------------------------------------
# Service Ports (Local)
# -----------------------------------------------------------------------------
AUTH_SERVICE_PORT=8081
TICKET_SERVICE_PORT=8082
BOOKING_SERVICE_PORT=8083
PAYMENT_SERVICE_PORT=8084
NOTIFICATION_SERVICE_PORT=8085
ANALYTICS_SERVICE_PORT=8086

# -----------------------------------------------------------------------------
# PostgreSQL (Remote: )
# -----------------------------------------------------------------------------
POSTGRES_HOST=
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_postgres_password
POSTGRES_DB=booking_rush
POSTGRES_SSLMODE=disable
POSTGRES_MAX_CONNECTIONS=100
POSTGRES_MAX_IDLE_CONNECTIONS=10

# Connection string format
# DATABASE_URL=postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}?sslmode=${POSTGRES_SSLMODE}

# -----------------------------------------------------------------------------
# Redis (Remote: )
# -----------------------------------------------------------------------------
REDIS_HOST=
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_RETRIES=3
REDIS_POOL_SIZE=100

# Connection string format
# REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# -----------------------------------------------------------------------------
# Redpanda / Kafka (Remote: )
# -----------------------------------------------------------------------------
KAFKA_BROKERS=:9092
KAFKA_GROUP_ID=booking-rush
KAFKA_AUTO_OFFSET_RESET=earliest
KAFKA_ENABLE_AUTO_COMMIT=false

# Redpanda Console (if available)
REDPANDA_CONSOLE_PORT=8888

# -----------------------------------------------------------------------------
# MinIO / S3 (Remote: )
# -----------------------------------------------------------------------------
MINIO_ENDPOINT=:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=your_minio_secret_key
MINIO_BUCKET=booking-rush
MINIO_USE_SSL=false

# -----------------------------------------------------------------------------
# MongoDB (For NestJS Services - Local or Remote)
# -----------------------------------------------------------------------------
MONGODB_HOST=localhost
MONGODB_PORT=27017
MONGODB_USER=
MONGODB_PASSWORD=
MONGODB_DB=booking_rush
MONGODB_AUTH_SOURCE=admin

# Connection string format
# MONGODB_URL=mongodb://${MONGODB_USER}:${MONGODB_PASSWORD}@${MONGODB_HOST}:${MONGODB_PORT}/${MONGODB_DB}?authSource=${MONGODB_AUTH_SOURCE}

# -----------------------------------------------------------------------------
# OpenTelemetry (Remote: )
# -----------------------------------------------------------------------------
OTEL_EXPORTER_OTLP_ENDPOINT=http://:4317
OTEL_EXPORTER_OTLP_PROTOCOL=grpc
OTEL_SERVICE_NAME=booking-rush
OTEL_TRACES_SAMPLER=always_on
OTEL_METRICS_EXPORTER=otlp
OTEL_LOGS_EXPORTER=otlp

# Jaeger UI (if available)
JAEGER_UI_PORT=16686

# Prometheus (if available)
PROMETHEUS_PORT=9090

# Grafana (if available)
GRAFANA_PORT=3000

# -----------------------------------------------------------------------------
# JWT Configuration
# -----------------------------------------------------------------------------
JWT_SECRET=your_super_secret_jwt_key_change_in_production
JWT_ACCESS_TOKEN_EXPIRY=15m
JWT_REFRESH_TOKEN_EXPIRY=168h

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST=20

# Booking-specific rate limits
BOOKING_RATE_LIMIT_REQUESTS_PER_MINUTE=20
BOOKING_RATE_LIMIT_BURST=10

# -----------------------------------------------------------------------------
# Booking Configuration
# -----------------------------------------------------------------------------
RESERVATION_TTL_MINUTES=10
MAX_TICKETS_PER_USER=4
VIRTUAL_QUEUE_BATCH_SIZE=100

# -----------------------------------------------------------------------------
# Email (SMTP for Notification Service)
# -----------------------------------------------------------------------------
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your_smtp_user
SMTP_PASSWORD=your_smtp_password
SMTP_FROM=noreply@booking-rush.com
