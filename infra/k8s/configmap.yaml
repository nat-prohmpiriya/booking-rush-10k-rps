apiVersion: v1
kind: ConfigMap
metadata:
  name: booking-rush-config
  namespace: booking-rush
data:
  # Application
  APP_NAME: "booking-rush"
  APP_ENVIRONMENT: "production"
  APP_DEBUG: "false"
  APP_VERSION: "1.0.0"

  # Server
  SERVER_HOST: "0.0.0.0"
  SERVER_READ_TIMEOUT: "30s"
  SERVER_WRITE_TIMEOUT: "30s"
  SERVER_IDLE_TIMEOUT: "120s"

  # PostgreSQL (Generic - for services using DATABASE_*)
  DATABASE_HOST: "booking-rush-pg-postgresql.booking-rush.svc.cluster.local"
  DATABASE_PORT: "5432"
  DATABASE_USER: "postgres"
  DATABASE_DBNAME: "booking_rush"
  DATABASE_SSLMODE: "disable"
  DATABASE_MAX_OPEN_CONNS: "10"
  DATABASE_MAX_IDLE_CONNS: "5"
  DATABASE_CONN_MAX_LIFETIME: "1h"
  DATABASE_CONN_MAX_IDLE_TIME: "30m"

  # Booking Database (for booking workers using BOOKING_DATABASE_*)
  BOOKING_DATABASE_HOST: "booking-rush-pg-postgresql.booking-rush.svc.cluster.local"
  BOOKING_DATABASE_PORT: "5432"
  BOOKING_DATABASE_USER: "postgres"
  BOOKING_DATABASE_DBNAME: "booking_rush"
  BOOKING_DATABASE_SSLMODE: "disable"
  BOOKING_DATABASE_MAX_OPEN_CONNS: "10"
  BOOKING_DATABASE_MAX_IDLE_CONNS: "5"
  BOOKING_DATABASE_CONN_MAX_LIFETIME: "1h"
  BOOKING_DATABASE_CONN_MAX_IDLE_TIME: "30m"

  # Payment Database (for payment workers using PAYMENT_DATABASE_*)
  PAYMENT_DATABASE_HOST: "booking-rush-pg-postgresql.booking-rush.svc.cluster.local"
  PAYMENT_DATABASE_PORT: "5432"
  PAYMENT_DATABASE_USER: "postgres"
  PAYMENT_DATABASE_DBNAME: "booking_rush"
  PAYMENT_DATABASE_SSLMODE: "disable"
  PAYMENT_DATABASE_MAX_OPEN_CONNS: "10"
  PAYMENT_DATABASE_MAX_IDLE_CONNS: "5"
  PAYMENT_DATABASE_CONN_MAX_LIFETIME: "1h"
  PAYMENT_DATABASE_CONN_MAX_IDLE_TIME: "30m"

  # Redis
  REDIS_HOST: "booking-rush-redis-master.booking-rush.svc.cluster.local"
  REDIS_PORT: "6379"
  REDIS_DB: "0"
  REDIS_POOL_SIZE: "100"
  REDIS_MIN_IDLE_CONNS: "10"
  REDIS_DIAL_TIMEOUT: "5s"
  REDIS_READ_TIMEOUT: "3s"
  REDIS_WRITE_TIMEOUT: "3s"

  # Kafka/Redpanda
  KAFKA_BROKERS: "booking-rush-redpanda-0.booking-rush-redpanda.booking-rush.svc.cluster.local:9093"
  KAFKA_CONSUMER_GROUP: "booking-rush"
  KAFKA_CLIENT_ID: "booking-rush"

  # MongoDB
  MONGODB_DATABASE: "booking_rush"

  # JWT
  JWT_ACCESS_TOKEN_TTL: "15m"
  JWT_REFRESH_TOKEN_TTL: "168h"
  JWT_ISSUER: "booking-rush"

  # OpenTelemetry
  OTEL_ENABLED: "true"
  OTEL_SERVICE_NAME: "booking-rush"
  OTEL_COLLECTOR_ADDR: "100.115.203.74:4317"
  OTEL_SAMPLE_RATIO: "1.0"

  # Rate Limiting
  RATE_LIMIT_REQUESTS_PER_MINUTE: "100"
  RATE_LIMIT_BURST: "20"
  BOOKING_RATE_LIMIT_REQUESTS_PER_MINUTE: "20"
  BOOKING_RATE_LIMIT_BURST: "10"

  # Booking
  RESERVATION_TTL_MINUTES: "10"
  MAX_TICKETS_PER_USER: "4"
  VIRTUAL_QUEUE_BATCH_SIZE: "100"

  # Internal Service URLs
  AUTH_SERVICE_URL: "http://auth-service:8081"
  TICKET_SERVICE_URL: "http://ticket-service:8082"
  BOOKING_SERVICE_URL: "http://booking-service:8083"
  PAYMENT_SERVICE_URL: "http://payment-service:8084"
